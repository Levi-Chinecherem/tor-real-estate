<nav class="bg-gray-800 p-4">
    <div class="container mx-auto flex justify-between items-center">
      <a href="{% url 'index' %}" class="text-white text-lg font-bold">TOR</a>
      <ul class="flex space-x-4">
        {% if user.is_authenticated %}
          
        {% comment %} <li>
          <div class="relative inline-block text-left">
            <div>
              <h3 class="inline-flex justify-center gap-x-1.5 text-white hover:text-gray-300 transition duration-300 focus:outline-none">
                ({{ user.username }})
              </h3>
            </div>
          </div>
        </li> {% endcomment %}
  
        <div class="relative inline-block text-left">
          <div>
            <div>
                <button type="button" class="inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" id="menu-button" aria-expanded="true" aria-haspopup="true">
                  Menu
                  <svg class="-mr-1 h-5 w-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                  </svg>
                </button>
              </div>
              
            
          <div class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
            <div class="py-1">
              <a href="{% url 'index' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-0">🏡 Home</a>
              <a href="{% url 'my_properties' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-4">🏡 My Properties</a>
              <a href="{% url 'confirmed_lands' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-0">🌎 Confirmed Lands</a>
              <a href="{% url 'unconfirmed_lands' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-1">🌎 Unconfirmed Lands</a>
            </div>
            <div class="py-1">
                <a href="{% url 'land_history' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-5">📜 Land History</a>
                <a href="{% url 'user_history' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-6">🧑‍💼 User History</a>
            </div>
            <div class="py-1">
                <a href="{% url 'profile' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-2">👤 My Profile</a>
                <a href="{% url 'password_change' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-3">🔐 Change Password</a>
              <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-gray-500 hover:text-gray-800" role="menuitem" tabindex="-1" id="menu-item-7">🔓 Logout ({{ user.username }})</a>
            </div>
          </div>
        </div>
          
        {% else %}
        <li><a href="{% url 'login' %}" class="text-white hover:text-gray-300 transition duration-300">Login</a></li>
        <li><a href="{% url 'register' %}" class="text-white hover:text-gray-300 transition duration-300">Register</a></li>
        {% endif %}
      </ul>
    </div>
  </nav>
  
  <script>
    const menuButton = document.getElementById('menu-button');
    const menu = document.querySelector('.absolute');
  
    menuButton.addEventListener('click', () => {
      const isVisible = menu.classList.contains('hidden');
      if (isVisible) {
        menu.classList.remove('hidden');
        menu.setAttribute('aria-expanded', 'true');
      } else {
        menu.classList.add('hidden');
        menu.setAttribute('aria-expanded', 'false');
      }
    });
  
    // Close dropdown when clicking outside
    document.addEventListener('click', (event) => {
      if (!menuButton.contains(event.target) && !menu.contains(event.target)) {
        menu.classList.add('hidden');
        menu.setAttribute('aria-expanded', 'false');
      }
    });
  </script>
  